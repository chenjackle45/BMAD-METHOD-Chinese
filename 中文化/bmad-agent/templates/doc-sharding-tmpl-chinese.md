# 文件分片計畫範本

此計畫指示 agent 如何在其 Librarian Phase 期間將大型來源文件分解為更小、更細緻的檔案。agent 將參考此計畫來識別來源文件、要擷取的特定區段，以及分片內容的目標檔案名稱。

---

## 1. 來源文件：PRD (專案需求文件)

- **給 Agent 的筆記：** 請與使用者確認 PRD 的確切檔案名稱（例如：`PRD.md`、`ProjectRequirements.md`、`prdx.y.z.md`）。

### 1.1. Epic 細化

- **指令：** 針對 PRD 中識別出的每個 Epic：
- **要複製的來源區段：** Epic 的完整文字，包括其主要描述、目標，以及該 Epic 下所有相關的使用者故事或詳細需求。確保從類似「**Epic X：**」的標題開始擷取內容，直到下一個此類標題或「Epic 總覽」區段的結尾。
- **目標檔案格式：** `docs/epic-<id>.md`
  - _Agent 筆記：`<id>` 應對應 Epic 編號。_

---

## 2. 來源文件：主要架構文件

- **給 Agent 的筆記：** 請與使用者確認確切的檔案名稱（例如：`architecture.md`、`SystemArchitecture.md`）。

### 2.1. 核心架構細項

- **要複製的來源區段：** 詳細說明「API 參考」、「API 端點」或「服務介面」的區段。
- **目標檔案：** `docs/api-reference.md`

- **要複製的來源區段：** 詳細說明「資料模型」、「資料庫結構描述」、「實體定義」的區段。
- **目標檔案：** `docs/data-models.md`

- **要複製的來源區段：** 標題為「環境變數文件」、「組態設定」、「部署參數」的區段，或者如果在「基礎架構與部署總覽」中找不到專用區段，則為相關子區段。
- **目標檔案：** `docs/environment-vars.md`

  - _Agent 筆記：優先使用專用的「環境變數」區段或連結的 `environment-vars.md` 來源（如果有的話）。如果沒有，則從「基礎架構與部署總覽」中擷取相關的組態詳細資訊。此分片用於特定的變數定義和用法。_

- **要複製的來源區段：** 詳細說明「專案結構」的區段。
- **目標檔案：** `docs/project-structure.md`

  - _Agent 筆記：如果專案涉及多個儲存庫（非 monorepo），請確保此檔案清楚描述每個相關儲存庫的結構，或在必要時連結到子檔案。_

- **要複製的來源區段：** 詳細說明「技術堆疊」、「關鍵技術」、「函式庫與框架」或「最終技術堆疊選擇」的區段。
- **目標檔案：** `docs/tech-stack.md`

- **要複製的來源區段：** 詳細說明「編碼標準」、「開發指南」、「最佳實務」、「測試策略」、「測試決策」、「QA 流程」、「整體測試策略」、「錯誤處理策略」和「安全性最佳實務」的區段。
- **目標檔案：** `docs/operational-guidelines.md`

  - _Agent 筆記：此檔案整合了幾個關鍵的營運面向。確保來自每個來源區段（「編碼標準」、「測試策略」、「錯誤處理策略」、「安全性最佳實務」）的內容在此文件中的 H3 (###) 或 H4 (####) 標題下清楚劃分。_

- **要複製的來源區段：** 標題為「元件視圖」的區段（包括「採用的架構／設計模式」等子區段）。
- **目標檔案：** `docs/component-view.md`

- **要複製的來源區段：** 標題為「核心工作流程／循序圖」的區段（包括所有子圖表）。
- **目標檔案：** `docs/sequence-diagrams.md`

- **要複製的來源區段：** 標題為「基礎架構與部署總覽」的區段。
- **目標檔案：** `docs/infra-deployment.md`

  - _Agent 筆記：這是指更廣泛的總覽，與特定的 `docs/environment-vars.md` 不同。_

- **要複製的來源區段：** 標題為「關鍵參考文件」的區段。
- **目標檔案：** `docs/key-references.md`

---

## 3. 來源文件：前端特定文件

- **給 Agent 的筆記：** 請與使用者確認檔案名稱（例如：`front-end-architecture.md`、`front-end-spec.md`、`ui-guidelines.md`）。可能存在多個前端文件。

### 3.1. 前端細項

- **要複製的來源區段：** 詳細說明「前端專案結構」或「詳細前端目錄結構」的區段。
- **目標檔案：** `docs/front-end-project-structure.md`

- **要複製的來源區段：** 詳細說明「UI 樣式指南」、「品牌指南」、「視覺設計規範」或「樣式方法」的區段。
- **目標檔案：** `docs/front-end-style-guide.md`

  - _Agent 筆記：此區段可能是子區段或參考其他文件（例如：`ui-ux-spec.txt`）。擷取前端架構文件本身定義的核心樣式理念和方法。_

- **要複製的來源區段：** 詳細說明「元件庫」、「可重複使用 UI 元件指南」、「原子設計元素」或「元件分解與實作細節」的區段。
- **目標檔案：** `docs/front-end-component-guide.md`

- **要複製的來源區段：** 詳細說明「前端編碼標準」的區段（特別針對 UI 開發，例如 JavaScript/TypeScript 樣式、CSS 命名慣例、前端無障礙最佳實務）。
- **目標檔案：** `docs/front-end-coding-standards.md`

  - _Agent 筆記：可能不存在專用的頂層區段。如果找不到，此分片可能為空，或需要與主要架構的編碼標準交叉參考。擷取任何提及的前端特定編碼慣例。_

- **要複製的來源區段：** 標題為「狀態管理深入探討」的區段。
- **目標檔案：** `docs/front-end-state-management.md`

- **要複製的來源區段：** 標題為「API 互動層」的區段。
- **目標檔案：** `docs/front-end-api-interaction.md`

- **要複製的來源區段：** 標題為「路由策略」的區段。
- **目標檔案：** `docs/front-end-routing-strategy.md`

- **要複製的來源區段：** 標題為「前端測試策略」的區段。
- **目標檔案：** `docs/front-end-testing-strategy.md`

---

關鍵：**索引管理：** 建立檔案後，視需要更新 `docs/index.md` 以參考並描述每個文件 - 不要提及細項或其分片來源，僅說明文件用途 - 因為索引也可能包含其他文件參考。
